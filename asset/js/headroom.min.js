!function(b){b&&(b.fn.headroom=function(a){return this.each(function(){var h=b(this),g=h.data("headroom"),f="object"==typeof a&&a;f=b.extend(!0,{},Headroom.options,f),g||(g=new Headroom(this,f),g.init(),h.data("headroom",g)),"string"==typeof a&&g[a]()})},b("[data-headroom]").each(function(){var a=b(this);a.headroom(a.data())}))}(window.Zepto||window.jQuery);var features={bind:!!(function(){}.bind),classList:"classList" in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;function Debouncer(a){this.callback=a;this.ticking=false}Debouncer.prototype={constructor:Debouncer,update:function(){this.callback&&this.callback();this.ticking=false},requestTick:function(){if(!this.ticking){requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this)));this.ticking=true}},handleEvent:function(){this.requestTick()}};function isDOMElement(a){return a&&typeof window!=="undefined"&&(a===window||a.nodeType)}function extend(b){if(arguments.length<=0){throw new Error("Missing arguments in extend function")}var a=b||{},d,c;for(c=1;c<arguments.length;c++){var e=arguments[c]||{};for(d in e){if(typeof a[d]==="object"&&!isDOMElement(a[d])){a[d]=extend(a[d],e[d])}else{a[d]=a[d]||e[d]}}}return a}function normalizeTolerance(a){return a===Object(a)?a:{down:a,up:a}}function Headroom(b,a){a=extend(a,Headroom.options);this.lastKnownScrollY=0;this.elem=b;this.debouncer=new Debouncer(this.update.bind(this));this.tolerance=normalizeTolerance(a.tolerance);this.classes=a.classes;this.offset=a.offset;this.scroller=a.scroller;this.initialised=false;this.onPin=a.onPin;this.onUnpin=a.onUnpin;this.onTop=a.onTop;this.onNotTop=a.onNotTop}Headroom.prototype={constructor:Headroom,init:function(){this.elem.classList.add(this.classes.initial);setTimeout(this.attachEvent.bind(this),100);return this},destroy:function(){var a=this.classes;this.initialised=false;this.elem.classList.remove(a.unpinned,a.pinned,a.top,a.initial);this.scroller.removeEventListener("scroll",this.debouncer,false)},attachEvent:function(){if(!this.initialised){this.lastKnownScrollY=this.getScrollY();this.initialised=true;this.scroller.addEventListener("scroll",this.debouncer,false);this.debouncer.handleEvent()}},unpin:function(){var b=this.elem.classList,a=this.classes;if(b.contains(a.pinned)||!b.contains(a.unpinned)){b.add(a.unpinned);b.remove(a.pinned);this.onUnpin&&this.onUnpin.call(this)}},pin:function(){var b=this.elem.classList,a=this.classes;if(b.contains(a.unpinned)){b.remove(a.unpinned);b.add(a.pinned);this.onPin&&this.onPin.call(this)}},top:function(){var b=this.elem.classList,a=this.classes;if(!b.contains(a.top)){b.add(a.top);b.remove(a.notTop);this.onTop&&this.onTop.call(this)}},notTop:function(){var b=this.elem.classList,a=this.classes;if(!b.contains(a.notTop)){b.add(a.notTop);b.remove(a.top);this.onNotTop&&this.onNotTop.call(this)}},getScrollY:function(){return(this.scroller.pageYOffset!==undefined)?this.scroller.pageYOffset:(this.scroller.scrollTop!==undefined)?this.scroller.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},getDocumentHeight:function(){var a=document.body,b=document.documentElement;return Math.max(a.scrollHeight,b.scrollHeight,a.offsetHeight,b.offsetHeight,a.clientHeight,b.clientHeight)},getElementHeight:function(a){return Math.max(a.scrollHeight,a.offsetHeight,a.clientHeight)},getScrollerHeight:function(){return(this.scroller===window||this.scroller===document.body)?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(c){var b=c<0,a=c+this.getViewportHeight()>this.getScrollerHeight();return b||a},toleranceExceeded:function(b,a){return Math.abs(b-this.lastKnownScrollY)>=this.tolerance[a]},shouldUnpin:function(d,a){var b=d>this.lastKnownScrollY,c=d>=this.offset;return b&&c&&a},shouldPin:function(d,b){var a=d<this.lastKnownScrollY,c=d<=this.offset;return(a&&b)||c},update:function(){var c=this.getScrollY(),b=c>this.lastKnownScrollY?"down":"up",a=this.toleranceExceeded(c,b);if(this.isOutOfBounds(c)){return}if(c<=this.offset){this.top()}else{this.notTop()}if(this.shouldUnpin(c,a)){this.unpin()}else{if(this.shouldPin(c,a)){this.pin()}}this.lastKnownScrollY=c}};Headroom.options={tolerance:{up:0,down:0},offset:0,scroller:window,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",initial:"headroom"}};Headroom.cutsTheMustard=typeof features!=="undefined"&&features.rAF&&features.bind&&features.classList;